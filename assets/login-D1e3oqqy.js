import"./modulepreload-polyfill-B5Qt9EMX.js";import{a as l}from"./firebaseConfig-oADvoGp-.js";import{onAuthStateChanged as m,signInWithEmailAndPassword as u}from"https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";import{v as f}from"./voiceBiometric-Bu1dBzvN.js";import"https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";import"https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";import"https://www.gstatic.com/firebasejs/11.0.1/firebase-storage.js";const a=document.getElementById("email"),s=document.getElementById("password"),t=document.getElementById("login-btn"),d=document.getElementById("signup-btn"),o=document.getElementById("voiceLoginBtn"),i=document.getElementById("voiceLoginStatus");function g(){if(!navigator.onLine)throw alert("‚ö†Ô∏è You are offline. Please check your internet connection."),new Error("Network offline")}m(l,e=>{e&&(console.log("‚úÖ Already logged in:",e.email),window.location.href="../pages/dashboard.html")});t&&t.addEventListener("click",async()=>{const e=a==null?void 0:a.value.trim(),r=s==null?void 0:s.value.trim();if(!e||!r){alert("‚ö†Ô∏è Please fill in both email and password.");return}try{g(),t.disabled=!0,t.innerText="üîÑ Logging in...";const c=(await u(l,e,r)).user;console.log("‚úÖ Login successful:",c.email),alert(`‚úÖ Welcome back, ${c.email}!`),window.location.href="../pages/dashboard.html"}catch(n){switch(console.error("‚ùå Login Error:",n.code,n.message),n.code){case"auth/network-request-failed":alert("‚ö†Ô∏è Network error ‚Äî please check your internet or CORS settings.");break;case"auth/invalid-email":alert("‚ùå Invalid email format.");break;case"auth/user-not-found":alert("‚ùå No account found with this email.");break;case"auth/wrong-password":alert("‚ùå Incorrect password. Try again.");break;default:alert("‚ùå Login failed: "+(n.message||n))}}finally{t.disabled=!1,t.innerText="Login"}});d&&d.addEventListener("click",()=>{console.log("‚û°Ô∏è Redirecting to signup page..."),window.location.href="../pages/signup.html"});o&&o.addEventListener("click",async()=>{try{g(),o.disabled=!0,i&&(i.innerText="üéôÔ∏è Listening... Please speak now.");const e=l.currentUser;if(!e){i.innerText="‚ö†Ô∏è Please log in with email first or register.",o.disabled=!1;return}await f(e.uid)?(i.innerText="‚úÖ Voice matched! Redirecting...",setTimeout(()=>window.location.href="../pages/dashboard.html",1e3)):i.innerText="‚ùå Voice not recognized. Try again!"}catch(e){console.error("‚ùå Voice login error:",e),i.innerText="‚ùå Voice login failed. Please try again."}finally{o.disabled=!1}});console.log("‚úÖ login.js loaded successfully");
